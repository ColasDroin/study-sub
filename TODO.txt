Make the generate run recursive and not dependent on the generation
Handle singularity and docker images
Add rm statement at the end of sh run files